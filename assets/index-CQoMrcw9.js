import{r,ad as v,j as e,u as $,c as T}from"./index-C05eWJr7.js";import{u as k}from"./index-B37YbCin.js";import{B as M,a as L,T as I,v as z}from"./ButtonToolJLPT-BnnHqSsX.js";import{f as S}from"./style-CZBsJsGU.js";import{u as E}from"./index-BMLPzEE7.js";import"./Model-CrjMDQPQ.js";import"./index-t--hEgTQ.js";import"./index-DRbwucHE.js";import"./Breadcrumbs-BnMafoeV.js";const F=r.memo(({dapAn:o,id:t,isSelected:a,isSuccess:c,onClick:d,index:u})=>{const{settings:m}=r.useContext(v),{styleFontSize:x}=m,g=`cursor-pointer px-4 py-1 w-full rounded-l-2xl  transition-all ${a?"border-gray-800 dark:border-white":"border-transparent"} ${a&&c?"  rounded-l-2xl transition-all text-white duration-200 bg-gradient-to-r from-green-900  via-green-800 via-95% to-transparent":a&&!c?" rounded-l-2xl transition-all text-white duration-200 bg-gradient-to-r from-red-900  via-red-800 via-90% to-transparent":""}`;return e.jsxs("li",{style:{fontSize:`${x}px`},className:`relative bg-[var(--color-main)]/5 rounded-2xl ${o===""?"hidden":"flex gap-2 items-center"}`,children:[e.jsx("input",{className:"peer/trung hidden",type:"checkbox",name:t,id:t,checked:a,readOnly:!0}),e.jsx("div",{className:"absolute  left-0 -translate-x-1/2 top-1/2 -translate-y-1/2  bg-white h-5 w-5 border rounded-full  border-indigo-800",children:e.jsx("p",{className:"text-indigo-800 text-sm font-bold absolute  left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2",children:u+1})}),e.jsx("label",{htmlFor:t,className:g,onClick:d,children:e.jsx("div",{children:S(o)})})]})}),J=r.memo(({data:o,index:t,settings:a})=>{if(!(o!=null&&o.cauhoi))return null;const{settings:c}=r.useContext(v),{styleColumn:d,styleFontSize:u}=c,{styleGDTrueFalse:m,styleColorTitle:x,styleColorShadow:g}=a,{dapan:f,cauhoi:s,img:p}=o,[n,b]=r.useState([]),i=r.useMemo(()=>n[t]!==void 0&&n[t]!==null,[n,t]),h=r.useMemo(()=>n[t]===f,[n,t,f]),y=r.useCallback(l=>{b(w=>{const N=[...w];return N[t]=Number(l),N})},[t]),j=()=>{const l="jlpt text-lg font-bold";return m?i&&h?`${l} text-green-800 border-b-2 border-green-800 transition-all duration-200`:i&&!h?`${l} text-red-800 border-b-2 border-red-800 transition-all duration-200`:`${l} text-gray-800 dark:text-white border-b-2 border-transparent transition-all duration-200`:l},C=()=>i&&h?"#016630":i?"#9f0712":g;return e.jsx("div",{style:{"--jlpt-color-shadow-box":C()},className:"jlptBorderShadow p-4 rounded-md font-Japan",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[p&&e.jsx("img",{src:p,alt:"img",className:"w-1/3 mx-auto"}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("div",{className:"w-full flex items-center gap-4",style:{fontSize:`${u}px`},children:e.jsx("h2",{style:{"--jlpt-title-u":x},className:j(),children:S(s)||"Loading..."})}),e.jsx(M,{data:o})]}),e.jsx("ul",{className:`grid gap-2 ${d===1?"grid-cols-1":"grid-cols-2"}`,children:[1,2,3,4].map((l,w)=>e.jsx(F,{dapAn:o[`dapan${l}`]||"",isSelected:n[t]===l,isSuccess:h&&n[t]===l,onClick:()=>y(l),index:w},`${s}-${t}-${l}`))})]})})});function Q(){const[o,t]=r.useState([]),{itemId:a}=$(),{settings:c}=r.useContext(v),d=a.substring(a.length-3,a.length),u=r.useMemo(()=>{const n=window.location.href;return new URL(n).pathname.split("/").filter(j=>j!=="")[1]},[a]),m=`GET=tokutei&db=${d}&path=${u}`,x=r.useRef(""),g=E(),{loading:f,apiData:s,fetchData:p}=k(`https://script.google.com/macros/s/AKfycbz59u6ng7B-x442h3wgLCuMvZM2tvuVXLMYkYmFlIk_vsY9j8qgCMHR6NeQb0QpL2NMTg/exec?${m}`,!1,{manual:!0});return r.useEffect(()=>{s!=null&&s.data&&(t(s.data),x.current="")},[s]),r.useEffect(()=>{p(),window.scrollY&&window.scrollTo({top:0,behavior:"smooth"})},[]),f?e.jsx(T,{}):e.jsxs("div",{className:"flex flex-col w-full min-h-screen trungSelectData",children:[e.jsx("div",{className:"px-5",children:g}),e.jsxs("div",{className:"z-50 w-full sticky top-20",children:[e.jsx(L,{view:s==null?void 0:s.views}),e.jsx(I,{})]}),e.jsxs("div",{className:"flex flex-col gap-2 dark:bg-bgColor/50 rounded-2xl px-5 py-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-800 dark:text-white text-center my-5",children:(s==null?void 0:s.title)||""}),o.length>0?o.map((n,b)=>{const i={...n};return e.jsx(J,{data:i,index:b,settings:c},n.id||z())}):e.jsx("h1",{className:"text-2xl font-bold text-center",children:"Không có dữ liệu"})]})]})}export{Q as default};
