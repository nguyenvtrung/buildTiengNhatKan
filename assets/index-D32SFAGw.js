import{r as a,g,f as S}from"./index-ByT4KsQN.js";function j(c,s,d={}){const{manual:n=!1}=d,[y,o]=a.useState(!n),[w,i]=a.useState(null),[h,f]=a.useState(null),u=g(),l=S(),r=a.useCallback(async(m=!1)=>{o(!0),f(null);try{if(s&&!m){const e=localStorage.getItem(window.location.pathname);if(e){const D=l(e);if(D){i(D),o(!1);return}}}const t=await fetch(c);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const p=await t.json();if(i(p),s){const e=u(p);localStorage.setItem(window.location.pathname,e)}}catch(t){f(t)}finally{o(!1)}},[c,s,l,u]);return a.useEffect(()=>{n||r()},[n,r]),{loading:y,apiData:w,error:h,fetchData:r}}export{j as u};
