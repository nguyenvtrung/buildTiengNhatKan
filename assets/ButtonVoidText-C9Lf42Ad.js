import{r as t,j as d,T as m,I as y}from"./index-lutZWs6c.js";const h=(o,u)=>{const a=String(o||"").replace(/<[^>]*>?/gm,""),[n,s]=t.useState(!1),[r,l]=t.useState(!1),i=t.useRef(null),e=t.useRef(window.speechSynthesis);t.useEffect(()=>{if(!e.current)return;const c=new SpeechSynthesisUtterance(a);c.lang=u||"ja-JP",c.rate=1,c.onend=()=>{s(!1),l(!1)},c.onerror=()=>{s(!1),l(!1)},i.current=c},[a,u]),t.useEffect(()=>()=>{e.current&&e.current.speaking&&e.current.cancel()},[]);const f=t.useCallback(()=>{!e.current||!i.current||(r?e.current.resume():(e.current.cancel(),e.current.speak(i.current)),s(!0),l(!1))},[r]),p=t.useCallback(()=>{e.current&&e.current.speaking&&(e.current.pause(),s(!1),l(!0))},[]),g=t.useCallback(()=>{n?p():f()},[n,f,p]);return{isPlaying:n,isPaused:r,togglePlayPause:g,play:f,pause:p}};function x({text:o,language:u}){const{isPlaying:a,togglePlayPause:n}=h(o,u),[s,r]=t.useState(!1);return t.useEffect(()=>{r(a)},[a]),d.jsx("div",{children:d.jsx(m,{title:s?"Tắt đọc":"Đọc",className:"cursor-pointer mt-1 p-1 rounded-full shadow shadow-gray-800",onClick:()=>{n(),r(!s)},children:d.jsx(y,{iconName:s?"faVolumeXmark":"faVolumeHigh",className:"aspect-1/1  text-gray-800 dark:text-white"})})})}export{x as B};
