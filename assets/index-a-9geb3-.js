import{j as e,r as d,I as j}from"./index-Ce9flTXi.js";import{u as y}from"./index-WF-qRRhW.js";import{a as v}from"./index-t--hEgTQ.js";import{A as w}from"./index-DVfvnbC_.js";import"./Breadcrumbs-BvP0ZA50.js";function I({videoId:s,title:r="Embedded YouTube Video"}){return e.jsxs("div",{className:"relative border-2 border-indigo-800 p-4 rounded-2xl   my-4",children:[e.jsxs("div",{className:"absolute bottom-0 right-5 z-50 bg-white text-indigo-800 font-bold translate-y-1/2 text-sm px-2 flex gap-2",children:["Chức năng được phát triển bởi ",e.jsx("p",{className:"text-red-400",children:location.hostname})]}),e.jsx("iframe",{src:`https://www.youtube.com/embed/${s}?autoplay=0&modestbranding=0&rel=0`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:r,className:"w-full aspect-2/1 rounded-xl z-10",controls:"0"})]})}const k=({videoId:s,setDataYoutube:r})=>{const[n,m]=d.useState(null),[o,a]=d.useState(null),x="AIzaSyCpTOUjz95iY9QE6kMn0vNQVg3Miwxn-DA";return d.useEffect(()=>{if(m(null),a(null),!s){a({message:"Thiếu Video ID hoặc API Key.",code:"MISSING_PARAMS"});return}(async()=>{try{const i=await v.get("https://www.googleapis.com/youtube/v3/videos",{params:{part:"snippet,statistics",id:s,key:x}});i.data.items.length>0?(m(i.data.items[0]),r(i.data.items[0])):a({message:`Không tìm thấy video với ID: ${s}`,code:"NOT_FOUND"})}catch(i){if(i.response){const h=i.response.data.error;a({message:h.message,code:h.code,status:i.response.status}),console.error("YouTube API Error:",h)}else i.request?a({message:"Không có phản hồi từ máy chủ YouTube. Vui lòng kiểm tra kết nối mạng.",code:"NO_RESPONSE"}):a({message:"Lỗi không xác định khi thiết lập yêu cầu.",code:"UNKNOWN_ERROR"})}})()},[s,x]),o?e.jsxs("div",{style:{padding:"15px",border:"1px solid red",color:"red",backgroundColor:"#fee"},children:[e.jsxs("h4",{children:["⚠️ Lỗi khi tải video: ",o.message]}),o.status&&e.jsxs("p",{children:["Mã trạng thái HTTP: **",o.status,"**"]}),e.jsx("p",{children:"Vui lòng kiểm tra: đường dẫn Video của bạn."})]}):n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full ",children:[e.jsxs("h1",{className:"text-center font-bold",children:[n.snippet.title,e.jsxs("span",{class:"flex items-center",children:[e.jsx("span",{class:"h-px flex-1 bg-linear-to-r from-transparent to-gray-300"}),e.jsx("span",{class:"shrink-0 px-4 text-gray-900",children:e.jsxs("p",{className:"text-center italic text-indigo-800 animate-pulse",children:[e.jsx(j,{iconName:"faUser"}),n.snippet.channelTitle]})}),e.jsx("span",{class:"h-px flex-1 bg-linear-to-l from-transparent to-gray-300"})]})]}),e.jsxs("ul",{className:"flex w-full gap-2 flex-wrap justify-center mt-2",children:[e.jsxs("li",{className:"flex gap-2 justify-center items-center text-sm w-fit bg-white text-indigo-800 border border-indigo-800 py-1 px-2 rounded-md",children:[e.jsx(j,{iconName:"faHeart"}),parseInt(n.statistics.likeCount).toLocaleString()]}),e.jsxs("li",{className:"flex gap-2 justify-center items-center text-sm w-fit bg-white text-indigo-800 border border-indigo-800 py-1 px-2 rounded-md",children:[e.jsx(j,{iconName:"faEye"}),parseInt(n.statistics.viewCount).toLocaleString()]})]})]})}):e.jsx("div",{children:"Đang tải thông tin..."})};function S({setDataYoutube:s}){const[r,n]=d.useState(""),[m,o]=d.useState(""),[a,x]=d.useState(""),b=d.useCallback(t=>{if(!t)return null;if(/^[A-Za-z0-9_-]{11}$/.test(t))return t;try{const l=new URL(t),N=l.hostname.toLowerCase();if(N==="youtu.be"){const u=l.pathname.split("/").filter(Boolean)[0];if(u&&/^[A-Za-z0-9_-]{11}$/.test(u))return u}if(N.includes("youtube.com")){const u=l.searchParams.get("v");if(u&&/^[A-Za-z0-9_-]{11}$/.test(u))return u;const c=l.pathname.split("/").filter(Boolean),f=c.indexOf("embed");if(f!==-1&&c[f+1]&&/^[A-Za-z0-9_-]{11}$/.test(c[f+1]))return c[f+1];const g=c.indexOf("v");if(g!==-1&&c[g+1]&&/^[A-Za-z0-9_-]{11}$/.test(c[g+1]))return c[g+1]}}catch{}const p=t.match(/([A-Za-z0-9_-]{11})/);return p?p[1]:null},[]),i=t=>{var l;(l=t==null?void 0:t.preventDefault)==null||l.call(t),x("");const p=b(r.trim());if(!p){o(""),x("Không tìm thấy ID video hợp lệ. Vui lòng kiểm tra link.");return}o(p)},h=()=>{n(""),o(""),x(""),s(null)};return e.jsxs("div",{className:"max-w-3xl mx-auto p-4",children:[e.jsxs("form",{onSubmit:i,className:"flex gap-2 mb-3 flex-col sm:flex-row   ",children:[e.jsx("input",{type:"text",value:r,onChange:t=>n(t.target.value),placeholder:"Dán link YouTube hoặc ID video ở đây",className:"flex-1 border rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-sky-400"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"submit",className:"group px-4 py-2 flex justify-center items-center gap-2 bg-sky-600 text-white rounded-md",children:[e.jsx(j,{iconName:"faSearch",className:"group-hover:animate-spin"})," Tìm kiếm"]}),e.jsx("button",{type:"button",onClick:h,className:"px-3 py-2 border rounded-md",children:"Xóa"})]})]}),a&&e.jsx("p",{className:"text-sm text-red-600 mb-2",children:a}),m?e.jsx(e.Fragment,{children:e.jsx(k,{videoId:m,setDataYoutube:s})}):e.jsx("p",{className:"text-sm text-gray-500"})]})}function A(){return e.jsx("div",{className:"p-4 border-2 border-indigo-800 rounded-2xl ",children:e.jsx("ul",{className:"flex flex-col",children:e.jsxs("li",{className:"flex gap-5 h-fit",children:[e.jsx("b",{className:"h-full cursor-pointer  hover:text-indigo-800 ",children:"00:00"}),e.jsxs("div",{className:"border-l-2 border-indigo-800 pl-5",children:[e.jsxs("p",{className:"text-md",children:[" ",location.hostname," ! おはようございます。"]}),e.jsxs("sub",{className:"text-sm text-indigo-800",children:[location.hostname," ! Xin chào."]})]})]})})})}function z(){const s=y(),[r,n]=d.useState(null);return e.jsxs("div",{children:[e.jsx("div",{children:s}),e.jsx(w,{}),e.jsxs("section",{className:"min-h-screen ",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{children:["Chức năng phát triển với"," ",e.jsx("b",{className:"text-red-500",children:"Youtube"})]})}),e.jsx("div",{className:"w-full",children:e.jsx(S,{setDataYoutube:n})}),e.jsx("section",{id:"video",children:r&&e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx(I,{title:r.title,videoId:r.id}),e.jsx(A,{})]})})]})]})}export{z as default};
