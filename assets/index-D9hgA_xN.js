import{R as N,j as i,r as f,P as Z,b as $e,I as P,c as je,e as Ce,T as Ne}from"./index-DFMJk8BF.js";import{A as Pe}from"./index-CMB0Ikbr.js";import{u as Ve}from"./index-CDrEZtDK.js";import{L as Ee}from"./index-Cs_f-VNv.js";import{u as He}from"./Model-CkONpvBT.js";import{u as Ke}from"./index-D3GNFJ3w.js";import"./Breadcrumbs-PNXGyQyV.js";function ze(){const{fontFamily:t,setFontFamily:e}=N.useContext(B).contextValue,s=r=>{const a=r.target.value;e&&e(a)},n=["Noto Serif JP","Roboto","Kiwi Maru","Yuji Syuku","Zen Antique Soft","Klee One","Rampart One"];return i.jsx("div",{className:"group  grid grid-cols-1 justify-between border-dashed border-2 border-gray-300 rounded-lg hover:border-indigo-500 ",children:i.jsx("select",{name:"font-family",id:"font-family-select",className:"p-2 outline-0",onChange:s,style:{fontFamily:t},defaultValue:t,children:n.map(r=>i.jsxs("option",{value:r,style:{fontFamily:r},className:"w-full hover:bg-gray-200",children:[r," - 漢字"]},r))})})}function Ge(){const{size:t,setSize:e}=N.useContext(B).contextValue,s=r=>{const a=parseInt(r.target.value,10);e&&e(a)},n=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48];return i.jsx("div",{className:"group grid grid-cols-1 flex-col border-dashed border-2 border-gray-300 rounded-lg hover:border-indigo-500 ",children:i.jsx("select",{id:"font-size-select",className:"p-2 outline-0 cursor-pointer",onChange:s,defaultValue:t,children:n.map(r=>i.jsxs("option",{value:r,className:"w-full hover:bg-gray-200 flex justify-center items-center",children:[r," px"]},r))})})}function Je(){return i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ze,{}),i.jsx(Ge,{})]})}function We(){const{trinhDo:t,setTrinhDo:e}=N.useContext(B).contextValue,s=o=>{e&&e(o)},n=[{id:0,name:"Tất cả"},{id:5,name:"N5"},{id:4,name:"N4"},{id:3,name:"N3"},{id:2,name:"N2"},{id:1,name:"N1"}],[r,a]=f.useState(t),c=o=>{a(o),s(o)};return i.jsxs("div",{className:"my-2 flex gap-2 flex-col xl:flex-row justify-between items-center",children:[i.jsx(Se,{list:n,activeId:r,handleSetActive:c}),i.jsx(Je,{})]})}function Se({list:t,activeId:e,handleSetActive:s}){return i.jsx("section",{className:"flex gap-1",children:t.map(n=>{const r=n.id===e,a="py-2 px-3 text-sm font-bold rounded transition duration-200 ease-in-out",c=r?"bg-indigo-800 text-white shadow-md hover:bg-indigo-600":"bg-gray-200 text-gray-800 hover:bg-gray-300";return i.jsx("button",{onClick:()=>s(n.id),className:`${a} ${c}`,children:n.name},n.id)})})}Se.propTypes={list:Z.array.isRequired,activeId:Z.number.isRequired,handleSetActive:Z.func.isRequired};function F(t){return Array.isArray?Array.isArray(t):ke(t)==="[object Array]"}function Ye(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Ue(t){return t==null?"":Ye(t)}function L(t){return typeof t=="string"}function Me(t){return typeof t=="number"}function Ze(t){return t===!0||t===!1||qe(t)&&ke(t)=="[object Boolean]"}function Ie(t){return typeof t=="object"}function qe(t){return Ie(t)&&t!==null}function M(t){return t!=null}function q(t){return!t.trim().length}function ke(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Qe="Incorrect 'index' type",Xe=t=>`Invalid value for key ${t}`,et=t=>`Pattern length exceeds max of ${t}.`,tt=t=>`Missing ${t} property in key`,st=t=>`Property 'weight' in key '${t}' must be a positive integer`,he=Object.prototype.hasOwnProperty;class nt{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(n=>{let r=Le(n);this._keys.push(r),this._keyMap[r.id]=r,s+=r.weight}),this._keys.forEach(n=>{n.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Le(t){let e=null,s=null,n=null,r=1,a=null;if(L(t)||F(t))n=t,e=de(t),s=se(t);else{if(!he.call(t,"name"))throw new Error(tt("name"));const c=t.name;if(n=c,he.call(t,"weight")&&(r=t.weight,r<=0))throw new Error(st(c));e=de(c),s=se(c),a=t.getFn}return{path:e,id:s,weight:r,src:n,getFn:a}}function de(t){return F(t)?t:t.split(".")}function se(t){return F(t)?t.join("."):t}function rt(t,e){let s=[],n=!1;const r=(a,c,o)=>{if(M(a))if(!c[o])s.push(a);else{let l=c[o];const d=a[l];if(!M(d))return;if(o===c.length-1&&(L(d)||Me(d)||Ze(d)))s.push(Ue(d));else if(F(d)){n=!0;for(let u=0,h=d.length;u<h;u+=1)r(d[u],c,o+1)}else c.length&&r(d,c,o+1)}};return r(t,L(e)?e.split("."):e,0),n?s:s[0]}const it={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},at={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},ot={location:0,threshold:.6,distance:100},ct={useExtendedSearch:!1,getFn:rt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...at,...it,...ot,...ct};const lt=/[^ ]+/g;function ut(t=1,e=3){const s=new Map,n=Math.pow(10,e);return{get(r){const a=r.match(lt).length;if(s.has(a))return s.get(a);const c=1/Math.pow(a,.5*t),o=parseFloat(Math.round(c*n)/n);return s.set(a,o),o},clear(){s.clear()}}}class ce{constructor({getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){this.norm=ut(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,L(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();L(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!M(e)||q(e))return;let n={v:e,i:s,n:this.norm.get(e)};this.records.push(n)}_addObject(e,s){let n={i:s,$:{}};this.keys.forEach((r,a)=>{let c=r.getFn?r.getFn(e):this.getFn(e,r.path);if(M(c)){if(F(c)){let o=[];const l=[{nestedArrIndex:-1,value:c}];for(;l.length;){const{nestedArrIndex:d,value:u}=l.pop();if(M(u))if(L(u)&&!q(u)){let h={v:u,i:d,n:this.norm.get(u)};o.push(h)}else F(u)&&u.forEach((h,g)=>{l.push({nestedArrIndex:g,value:h})})}n.$[a]=o}else if(L(c)&&!q(c)){let o={v:c,n:this.norm.get(c)};n.$[a]=o}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function De(t,e,{getFn:s=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const r=new ce({getFn:s,fieldNormWeight:n});return r.setKeys(t.map(Le)),r.setSources(e),r.create(),r}function ht(t,{getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const{keys:n,records:r}=t,a=new ce({getFn:e,fieldNormWeight:s});return a.setKeys(n),a.setIndexRecords(r),a}function K(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:r=p.distance,ignoreLocation:a=p.ignoreLocation}={}){const c=e/t.length;if(a)return c;const o=Math.abs(n-s);return r?c+o/r:o?1:c}function dt(t=[],e=p.minMatchCharLength){let s=[],n=-1,r=-1,a=0;for(let c=t.length;a<c;a+=1){let o=t[a];o&&n===-1?n=a:!o&&n!==-1&&(r=a-1,r-n+1>=e&&s.push([n,r]),n=-1)}return t[a-1]&&a-n>=e&&s.push([n,a-1]),s}const O=32;function ft(t,e,s,{location:n=p.location,distance:r=p.distance,threshold:a=p.threshold,findAllMatches:c=p.findAllMatches,minMatchCharLength:o=p.minMatchCharLength,includeMatches:l=p.includeMatches,ignoreLocation:d=p.ignoreLocation}={}){if(e.length>O)throw new Error(et(O));const u=e.length,h=t.length,g=Math.max(0,Math.min(n,h));let m=a,x=g;const v=o>1||l,A=v?Array(h):[];let b;for(;(b=t.indexOf(e,x))>-1;){let C=K(e,{currentLocation:b,expectedLocation:g,distance:r,ignoreLocation:d});if(m=Math.min(C,m),x=b+u,v){let k=0;for(;k<u;)A[b+k]=1,k+=1}}x=-1;let j=[],y=1,w=u+h;const S=1<<u-1;for(let C=0;C<u;C+=1){let k=0,T=w;for(;k<T;)K(e,{errors:C,currentLocation:g+T,expectedLocation:g,distance:r,ignoreLocation:d})<=m?k=T:w=T,T=Math.floor((w-k)/2+k);w=T;let le=Math.max(1,g-T+1),U=c?h:Math.min(g+T,h)+u,R=Array(U+2);R[U+1]=(1<<C)-1;for(let I=U;I>=le;I-=1){let H=I-1,ue=s[t.charAt(H)];if(v&&(A[H]=+!!ue),R[I]=(R[I+1]<<1|1)&ue,C&&(R[I]|=(j[I+1]|j[I])<<1|1|j[I+1]),R[I]&S&&(y=K(e,{errors:C,currentLocation:H,expectedLocation:g,distance:r,ignoreLocation:d}),y<=m)){if(m=y,x=H,x<=g)break;le=Math.max(1,2*g-x)}}if(K(e,{errors:C+1,currentLocation:g,expectedLocation:g,distance:r,ignoreLocation:d})>m)break;j=R}const E={isMatch:x>=0,score:Math.max(.001,y)};if(v){const C=dt(A,o);C.length?l&&(E.indices=C):E.isMatch=!1}return E}function gt(t){let e={};for(let s=0,n=t.length;s<n;s+=1){const r=t.charAt(s);e[r]=(e[r]||0)|1<<n-s-1}return e}const G=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Fe{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:r=p.distance,includeMatches:a=p.includeMatches,findAllMatches:c=p.findAllMatches,minMatchCharLength:o=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreDiacritics:d=p.ignoreDiacritics,ignoreLocation:u=p.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:r,includeMatches:a,findAllMatches:c,minMatchCharLength:o,isCaseSensitive:l,ignoreDiacritics:d,ignoreLocation:u},e=l?e:e.toLowerCase(),e=d?G(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(m,x)=>{this.chunks.push({pattern:m,alphabet:gt(m),startIndex:x})},g=this.pattern.length;if(g>O){let m=0;const x=g%O,v=g-x;for(;m<v;)h(this.pattern.substr(m,O),m),m+=O;if(x){const A=g-O;h(this.pattern.substr(A),A)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,ignoreDiacritics:n,includeMatches:r}=this.options;if(e=s?e:e.toLowerCase(),e=n?G(e):e,this.pattern===e){let v={isMatch:!0,score:0};return r&&(v.indices=[[0,e.length-1]]),v}const{location:a,distance:c,threshold:o,findAllMatches:l,minMatchCharLength:d,ignoreLocation:u}=this.options;let h=[],g=0,m=!1;this.chunks.forEach(({pattern:v,alphabet:A,startIndex:b})=>{const{isMatch:j,score:y,indices:w}=ft(e,v,A,{location:a+b,distance:c,threshold:o,findAllMatches:l,minMatchCharLength:d,includeMatches:r,ignoreLocation:u});j&&(m=!0),g+=y,j&&w&&(h=[...h,...w])});let x={isMatch:m,score:m?g/this.chunks.length:1};return m&&r&&(x.indices=h),x}}class _{constructor(e){this.pattern=e}static isMultiMatch(e){return fe(e,this.multiRegex)}static isSingleMatch(e){return fe(e,this.singleRegex)}search(){}}function fe(t,e){const s=t.match(e);return s?s[1]:null}class mt extends _{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class pt extends _{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class xt extends _{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class yt extends _{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class vt extends _{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class bt extends _{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Be extends _{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:r=p.distance,includeMatches:a=p.includeMatches,findAllMatches:c=p.findAllMatches,minMatchCharLength:o=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreDiacritics:d=p.ignoreDiacritics,ignoreLocation:u=p.ignoreLocation}={}){super(e),this._bitapSearch=new Fe(e,{location:s,threshold:n,distance:r,includeMatches:a,findAllMatches:c,minMatchCharLength:o,isCaseSensitive:l,ignoreDiacritics:d,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Te extends _{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,n;const r=[],a=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+a,r.push([n,s-1]);const c=!!r.length;return{isMatch:c,score:c?0:1,indices:r}}}const ne=[mt,Te,xt,yt,bt,vt,pt,Be],ge=ne.length,wt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,At="|";function jt(t,e={}){return t.split(At).map(s=>{let n=s.trim().split(wt).filter(a=>a&&!!a.trim()),r=[];for(let a=0,c=n.length;a<c;a+=1){const o=n[a];let l=!1,d=-1;for(;!l&&++d<ge;){const u=ne[d];let h=u.isMultiMatch(o);h&&(r.push(new u(h,e)),l=!0)}if(!l)for(d=-1;++d<ge;){const u=ne[d];let h=u.isSingleMatch(o);if(h){r.push(new u(h,e));break}}}return r})}const Ct=new Set([Be.type,Te.type]);class Nt{constructor(e,{isCaseSensitive:s=p.isCaseSensitive,ignoreDiacritics:n=p.ignoreDiacritics,includeMatches:r=p.includeMatches,minMatchCharLength:a=p.minMatchCharLength,ignoreLocation:c=p.ignoreLocation,findAllMatches:o=p.findAllMatches,location:l=p.location,threshold:d=p.threshold,distance:u=p.distance}={}){this.query=null,this.options={isCaseSensitive:s,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:a,findAllMatches:o,ignoreLocation:c,location:l,threshold:d,distance:u},e=s?e:e.toLowerCase(),e=n?G(e):e,this.pattern=e,this.query=jt(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:a}=this.options;e=r?e:e.toLowerCase(),e=a?G(e):e;let c=0,o=[],l=0;for(let d=0,u=s.length;d<u;d+=1){const h=s[d];o.length=0,c=0;for(let g=0,m=h.length;g<m;g+=1){const x=h[g],{isMatch:v,indices:A,score:b}=x.search(e);if(v){if(c+=1,l+=b,n){const j=x.constructor.type;Ct.has(j)?o=[...o,...A]:o.push(A)}}else{l=0,c=0,o.length=0;break}}if(c){let g={isMatch:!0,score:l/c};return n&&(g.indices=o),g}}return{isMatch:!1,score:1}}}const re=[];function Et(...t){re.push(...t)}function ie(t,e){for(let s=0,n=re.length;s<n;s+=1){let r=re[s];if(r.condition(t,e))return new r(t,e)}return new Fe(t,e)}const J={AND:"$and",OR:"$or"},ae={PATH:"$path",PATTERN:"$val"},oe=t=>!!(t[J.AND]||t[J.OR]),St=t=>!!t[ae.PATH],Mt=t=>!F(t)&&Ie(t)&&!oe(t),me=t=>({[J.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function _e(t,e,{auto:s=!0}={}){const n=r=>{let a=Object.keys(r);const c=St(r);if(!c&&a.length>1&&!oe(r))return n(me(r));if(Mt(r)){const l=c?r[ae.PATH]:a[0],d=c?r[ae.PATTERN]:r[l];if(!L(d))throw new Error(Xe(l));const u={keyId:se(l),pattern:d};return s&&(u.searcher=ie(d,e)),u}let o={children:[],operator:a[0]};return a.forEach(l=>{const d=r[l];F(d)&&d.forEach(u=>{o.children.push(n(u))})}),o};return oe(t)||(t=me(t)),n(t)}function It(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach(s=>{let n=1;s.matches.forEach(({key:r,norm:a,score:c})=>{const o=r?r.weight:null;n*=Math.pow(c===0&&o?Number.EPSILON:c,(o||1)*(e?1:a))}),s.score=n})}function kt(t,e){const s=t.matches;e.matches=[],M(s)&&s.forEach(n=>{if(!M(n.indices)||!n.indices.length)return;const{indices:r,value:a}=n;let c={indices:r,value:a};n.key&&(c.key=n.key.src),n.idx>-1&&(c.refIndex=n.idx),e.matches.push(c)})}function Lt(t,e){e.score=t.score}function Dt(t,e,{includeMatches:s=p.includeMatches,includeScore:n=p.includeScore}={}){const r=[];return s&&r.push(kt),n&&r.push(Lt),t.map(a=>{const{idx:c}=a,o={item:e[c],refIndex:c};return r.length&&r.forEach(l=>{l(a,o)}),o})}class V{constructor(e,s={},n){this.options={...p,...s},this.options.useExtendedSearch,this._keyStore=new nt(this.options.keys),this.setCollection(e,n)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof ce))throw new Error(Qe);this._myIndex=s||De(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){M(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let n=0,r=this._docs.length;n<r;n+=1){const a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,r-=1,s.push(a))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:a,sortFn:c,ignoreFieldNorm:o}=this.options;let l=L(e)?L(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return It(l,{ignoreFieldNorm:o}),a&&l.sort(c),Me(s)&&s>-1&&(l=l.slice(0,s)),Dt(l,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const s=ie(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:a,i:c,n:o})=>{if(!M(a))return;const{isMatch:l,score:d,indices:u}=s.searchIn(a);l&&r.push({item:a,idx:c,matches:[{score:d,value:a,norm:o,indices:u}]})}),r}_searchLogical(e){const s=_e(e,this.options),n=(o,l,d)=>{if(!o.children){const{keyId:h,searcher:g}=o,m=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:g});return m&&m.length?[{idx:d,item:l,matches:m}]:[]}const u=[];for(let h=0,g=o.children.length;h<g;h+=1){const m=o.children[h],x=n(m,l,d);if(x.length)u.push(...x);else if(o.operator===J.AND)return[]}return u},r=this._myIndex.records,a={},c=[];return r.forEach(({$:o,i:l})=>{if(M(o)){let d=n(s,o,l);d.length&&(a[l]||(a[l]={idx:l,item:o,matches:[]},c.push(a[l])),d.forEach(({matches:u})=>{a[l].matches.push(...u)}))}}),c}_searchObjectList(e){const s=ie(e,this.options),{keys:n,records:r}=this._myIndex,a=[];return r.forEach(({$:c,i:o})=>{if(!M(c))return;let l=[];n.forEach((d,u)=>{l.push(...this._findMatches({key:d,value:c[u],searcher:s}))}),l.length&&a.push({idx:o,item:c,matches:l})}),a}_findMatches({key:e,value:s,searcher:n}){if(!M(s))return[];let r=[];if(F(s))s.forEach(({v:a,i:c,n:o})=>{if(!M(a))return;const{isMatch:l,score:d,indices:u}=n.searchIn(a);l&&r.push({score:d,key:e,value:a,idx:c,norm:o,indices:u})});else{const{v:a,n:c}=s,{isMatch:o,score:l,indices:d}=n.searchIn(a);o&&r.push({score:l,key:e,value:a,norm:c,indices:d})}return r}}V.version="7.1.0";V.createIndex=De;V.parseIndex=ht;V.config=p;V.parseQuery=_e;Et(Nt);const Q=t=>typeof t!="string"?"":(t=t.toLowerCase(),t=t.replace(/á|à|ả|ã|ạ|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/g,"a"),t=t.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/g,"e"),t=t.replace(/í|ì|ỉ|ĩ|ị/g,"i"),t=t.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/g,"o"),t=t.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/g,"u"),t=t.replace(/ý|ỳ|ỷ|ỹ|ỵ/g,"y"),t=t.replace(/đ/g,"d"),t);function Ft(){var x;const t=(x=f.useContext(B))==null?void 0:x.contextValue,e=(t==null?void 0:t.data)||[],s=t==null?void 0:t.setDisplayedData,[n,r]=N.useState(""),[a,c]=N.useState(!1),o=$e(n,1e3),l=f.useMemo(()=>e.map(v=>({...v,hanviet_normal:Q(v.hanviet||""),keywords_normal:Q(v.keywords||"")})),[e]),d={threshold:.3,keys:["hanviet","keywords","hanviet_normal","keywords_normal"],includeScore:!0},u=f.useMemo(()=>new V(l,d),[l]),h=f.useMemo(()=>{if(o.trim()==="")return e;const v=Q(o);return u.search(v).map(b=>b.item)},[o,u,e]),g=f.useMemo(()=>o.trim()!==""&&h.length===0,[o,h]),m=v=>{r(v.target.value)};return f.useEffect(()=>{if(s){if(h.length===0)return;s(h)}},[h,s]),f.useEffect(()=>{g&&!a&&(alert(`Cảnh báo !!!
Vui lòng nhập lại nội dung
Ví dụ : 中 hoặc Trung hoặc naka ,... (Tìm kiếm liên quan tới chữ đó)
Xin trân thành cảm ơn !
Bảng này sẽ không hiển thị lại !!!`),r(""),c(!0))},[g,a,c]),i.jsxs(N.Fragment,{children:[i.jsxs("div",{className:"relative w-full rounded-full p-4 my-5 border-2 border-gray-800 flex items-center gap-2",children:[i.jsx(P,{iconName:"faSearch",className:"text-gray-800 "}),i.jsx("input",{type:"text",placeholder:"Tìm kiếm hơn 2.136 Kanji (漢字 - かんじ - kanji)",className:"outline-0 w-full",onChange:v=>m(v)}),i.jsx("a",{target:"_blank",href:"https://www.facebook.com/Puti78",className:"absolute bg-white bottom-0 translate-y-1/2 right-6  flex flex-col xl:flex-row items-center gap-2 text-gray-800 font-bold text-xs",children:i.jsx("p",{className:"text-nowrap capitalize",children:"Powered by Trung"})})]}),i.jsx(We,{})]})}var Oe={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pe=N.createContext&&N.createContext(Oe),Bt=["attr","size","title"];function Tt(t,e){if(t==null)return{};var s=_t(t,e),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function _t(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function W(){return W=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},W.apply(this,arguments)}function xe(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,n)}return s}function Y(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?xe(Object(s),!0).forEach(function(n){Ot(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):xe(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Ot(t,e,s){return e=Rt(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Rt(t){var e=$t(t,"string");return typeof e=="symbol"?e:e+""}function $t(t,e){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Re(t){return t&&t.map((e,s)=>N.createElement(e.tag,Y({key:s},e.attr),Re(e.child)))}function D(t){return e=>N.createElement(Pt,W({attr:Y({},t.attr)},e),Re(t.child))}function Pt(t){var e=s=>{var{attr:n,size:r,title:a}=t,c=Tt(t,Bt),o=r||s.size||"1em",l;return s.className&&(l=s.className),t.className&&(l=(l?l+" ":"")+t.className),N.createElement("svg",W({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,c,{className:l,style:Y(Y({color:t.color||s.color},s.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&N.createElement("title",null,a),t.children)};return pe!==void 0?N.createElement(pe.Consumer,null,s=>e(s)):e(Oe)}function Vt(t){return D({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function Ht(t){return D({attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M6 8h-6v-6h1v4.109c1.013-3.193 4.036-5.484 7.5-5.484 3.506 0 6.621 2.36 7.574 5.739l-0.963 0.271c-0.832-2.95-3.551-5.011-6.611-5.011-3.226 0.001-6.016 2.276-6.708 5.376h4.208v1zM11 9v1h4.208c-0.693 3.101-3.479 5.375-6.708 5.375-3.062 0-5.78-2.061-6.611-5.011l-0.963 0.271c0.952 3.379 4.067 5.739 7.574 5.739 3.459 0 6.475-2.28 7.5-5.482v4.108h1v-6h-6z"},child:[]}]})(t)}const Kt=({isLoading:t,onLoadMore:e})=>{const s=()=>i.jsx("span",{className:"group-hover:animate-spin",children:t?i.jsx(Ee,{}):i.jsx(Ht,{className:"rotate-y-180 group-hover:animate-pulse"})});return i.jsxs("div",{className:"flex gap-2 items-center justify-between border-b-2 border-indigo-800 z-10 bg-indigo-50 relative",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx(P,{iconName:"faWebAwesome",className:"text-yellow-500"}),i.jsx("h2",{className:"font-bold",children:"Danh sách ví dụ"})]}),i.jsxs("button",{disabled:t,onClick:e,className:`
            ${t?"pointer-events-none opacity-70":""} 
            bg-indigo-300 group flex gap-2 items-center p-1 px-2 rounded-t-xl border-2 border-b-0 border-indigo-800 text-indigo-900 transition-all hover:bg-indigo-200 active:scale-95
          `,children:[s(),i.jsx("span",{className:"hidden md:block font-bold",children:"Tải thêm ví dụ"})]})]})},zt=f.memo(Kt);function Gt(t){return D({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.04 19.32Q12 21.51 12 24q0-2.49.93-4.68.96-2.19 2.58-3.81t3.81-2.55Q21.51 12 24 12q-2.49 0-4.68-.93a12.3 12.3 0 0 1-3.81-2.58 12.3 12.3 0 0 1-2.58-3.81Q12 2.49 12 0q0 2.49-.96 4.68-.93 2.19-2.55 3.81a12.3 12.3 0 0 1-3.81 2.58Q2.49 12 0 12q2.49 0 4.68.96 2.19.93 3.81 2.55t2.55 3.81"},child:[]}]})(t)}function Jt(t){return D({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M19.7134 8.12811L19.4668 8.69379C19.2864 9.10792 18.7136 9.10792 18.5331 8.69379L18.2866 8.12811C17.8471 7.11947 17.0555 6.31641 16.0677 5.87708L15.308 5.53922C14.8973 5.35653 14.8973 4.75881 15.308 4.57612L16.0252 4.25714C17.0384 3.80651 17.8442 2.97373 18.2761 1.93083L18.5293 1.31953C18.7058 0.893489 19.2942 0.893489 19.4706 1.31953L19.7238 1.93083C20.1558 2.97373 20.9616 3.80651 21.9748 4.25714L22.6919 4.57612C23.1027 4.75881 23.1027 5.35653 22.6919 5.53922L21.9323 5.87708C20.9445 6.31641 20.1529 7.11947 19.7134 8.12811ZM5 17V15H3V17C3 19.2091 4.79086 21 7 21H10V19H7L6.85074 18.9945C5.81588 18.9182 5 18.0544 5 17ZM22.4 21L18 10H16L11.601 21H13.755L14.954 18H19.044L20.245 21H22.4ZM15.753 16L17 12.8852L18.245 16H15.753ZM8 4V2H6V4H2V11H6V14H8V11H12V4H8ZM4 6H6V9H4V6ZM8 6H10V9H8V6Z"},child:[]}]})(t)}function Wt(t){return D({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4.99805 15V19H8.99805V21H2.99805V15H4.99805ZM20.998 15V21H14.998V19H18.998V15H20.998ZM12.997 6L17.397 17H15.242L14.041 14H9.95105L8.75205 17H6.59805L10.997 6H12.997ZM11.997 8.88517L10.75 12H13.242L11.997 8.88517ZM8.99805 3V5H4.99805V9H2.99805V3H8.99805ZM20.998 3V9H18.998V5H14.998V3H20.998Z"},child:[]}]})(t)}const Yt=({Icon:t,text:e,isActive:s,iconColorClass:n,textSize:r="text-sm md:text-base",isTitle:a=!1})=>i.jsxs("span",{className:`grid grid-cols-[20px_1fr] items-center gap-1 ${a?"text-lg font-medium tracking-widest":"text-sm"}`,children:[i.jsx(t,{className:`${n} ${s?"text-yellow-500":""}`}),i.jsx("p",{className:`border-l pl-2 ${r} ${a?"font-Japan md:text-xl":""}`,children:e})]}),X=f.memo(Yt),Ut=({data:t,activeId:e,onSelect:s})=>{const n=e===(t==null?void 0:t.id),[r,a]=f.useState(!1);return f.useEffect(()=>{const c=setTimeout(()=>a(!0),50);return()=>clearTimeout(c)},[]),i.jsxs("div",{onClick:()=>s(t==null?void 0:t.id),className:`
        transform origin-top transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)]
        ${r?"opacity-100 translate-y-0 scale-100 mb-2":"opacity-0 -translate-y-8 scale-95 mb-0 h-0 overflow-hidden py-0"}
        ${n?"bg-indigo-800 text-white rounded-2xl shadow-indigo-800/30":"border-transparent bg-white"}
        p-2 flex flex-col gap-2 items-start border-b border-indigo-800 py-2 shadow cursor-pointer rounded-xl w-full
      `,children:[i.jsx(X,{Icon:Gt,text:t==null?void 0:t.title,isActive:n,iconColorClass:"text-sky-600",isTitle:!0}),i.jsx(X,{Icon:Wt,text:t==null?void 0:t.subTitle,isActive:n,iconColorClass:"text-indigo-600"}),i.jsx(X,{Icon:Jt,text:t==null?void 0:t.vietnamese,isActive:n,iconColorClass:"text-sky-600"})]})},Zt=f.memo(Ut),z=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#06b6d4","#ec4899"],qt=`<svg xmlns="http://www.w3.org/2000/svg" width="109" height="109" viewBox="0 0 109 109">
  <g id="kvg:StrokePaths_05186" style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;">
  <g id="kvg:05186" kvg:element="円">
    <g id="kvg:05186-g1" kvg:element="冂" kvg:radical="general">
      <path id="kvg:05186-s1" kvg:type="㇑" d="M21.75,19.8c0.91,0.91,1.47,3.23,1.5,5.45c0.2,13.9,0.03,47.69,0.03,62.5c0,2-0.03,4.99-0.03,6"/>
      <path id="kvg:05186-s2" kvg:type="㇆a" d="M24.06,21.56c15.07-1.68,49.46-5.58,57.92-6.31c2.9-0.25,4.78,1.88,4.78,4.27c0,13.48,0,53.21,0,67.48c0,9.75-4.25,6.5-8.5,1.5"/>
    </g>
    <g id="kvg:05186-g2" kvg:phon="員V">
      <path id="kvg:05186-s3" kvg:type="㇑a" d="M52.25,20.75c0.88,0.88,1.5,2,1.5,3.71c0,6.76,0,27.54,0,31.04"/>
      <path id="kvg:05186-s4" kvg:type="㇐a" d="M24.75,59.75c14.62-1.75,43-4.25,60.5-5.25"/>
    </g>
  </g>
  </g>
  <g id="kvg:StrokeNumbers_05186" style="font-size:8;fill:#808080">
    <text transform="matrix(1 0 0 1 16.50 28.63)">1</text>
    <text transform="matrix(1 0 0 1 24.75 17.50)">2</text>
    <text transform="matrix(1 0 0 1 45.50 29.50)">3</text>
    <text transform="matrix(1 0 0 1 28.50 56.50)">4</text>
  </g>
</svg>`;function ye(t){let e=t.trim();e.includes("kvg:")&&!e.includes("xmlns:kvg")&&(e=e.replace(/<svg([^>]*)>/,(u,h)=>`<svg${h} xmlns:kvg="http://kanjivg.tagaini.net">`));const s=new DOMParser;let n=s.parseFromString(e,"image/svg+xml");n.querySelector("parsererror")&&(n=s.parseFromString(e,"text/html"));let r="？";const a=Array.from(n.querySelectorAll("*"));for(const u of a){for(const h of Array.from(u.attributes))if((h.localName==="element"||h.name==="kvg:element")&&h.value.length===1){r=h.value;break}if(r!=="？")break}const c=Array.from(n.querySelectorAll("path")).filter(u=>(u.getAttribute("id")||"").includes("-s")).map(u=>{const h=u.getAttribute("id")||"",g=h.match(/-s(\d+)$/);return{id:h,d:u.getAttribute("d")||"",order:g?parseInt(g[1],10):999}}).sort((u,h)=>u.order-h.order),o=Array.from(n.querySelectorAll("g")).find(u=>(u.getAttribute("id")||"").toLowerCase().includes("strokenumbers")),d=(o?Array.from(o.querySelectorAll("text")):Array.from(n.querySelectorAll("text"))).map(u=>({text:u.textContent||"",transform:u.getAttribute("transform")||""}));if(c.length===0)throw new Error("Không tìm thấy đường nét KanjiVG hợp lệ.");return{id:r.charCodeAt(0).toString(16).toUpperCase(),element:r,paths:c,numbers:d}}async function Qt(t,e){const s=`
        Act as a Japanese language expert. Return a JSON object for the Kanji provided below.
        Constraints:
        Quantity: Exactly 1 sentence.
        level: N3,N4,N2.
        Context: Everyday life conversation(random in : Work, travel, shopping, greetings, etc.).
        Strict Output: Return ONLY the JSON object. No conversational text, no markdown code blocks, no explanations.
        JSON Structure: { "title": "Japanese sentence", "subTitle": "romaji", "vietnamese": "Vietnamese translation" }
        Kanji: ${t}
    `;try{const n=await e(s);if(n.startsWith("Lỗi"))return n;const r=n.replace(/```json/g,"").replace(/```/g,"").trim();if(r.startsWith("{")&&r.endsWith("}")){const a=JSON.parse(r);return Xt(t,a,je()),a}return"Lỗi: Dữ liệu AI trả về không đúng định dạng."}catch(n){return console.error("Lỗi Gemini:",n),null}}async function Xt(t,e,s){const n="https://docs.google.com/forms/d/e/1FAIpQLSfdAlYiWdETR6BRipKJ7uT8pRf3YZJCIhlPVs28880DiDkBMg/formResponse",r="entry.1738992373",a="entry.735582802",c="entry.1410614324",o="entry.2097592303",l="entry.1829366920",d=new FormData;if(!e||typeof e!="object"||!e.title||!e.subTitle||!e.vietnamese)return{error:"Dữ liệu đầu vào không hợp lệ"};const u=()=>{const h=localStorage.getItem("user");if(h)try{if(typeof s!="function")return null;const g=JSON.parse(s(h));return g==null?void 0:g.email}catch(g){return console.error("Lỗi khi giải mã data:",g),"null"}};d.append(r,t),d.append(a,e==null?void 0:e.title),d.append(c,e==null?void 0:e.subTitle),d.append(o,e==null?void 0:e.vietnamese),d.append(l,u());try{const h=await fetch(n,{method:"POST",body:d});if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`)}catch(h){return console.error("Error fetching kanji data:",h),null}}async function es(t){const e=`https://script.google.com/macros/s/AKfycby1VrgeRT1YiMUDppTe2OWid77OLSeso59o8qygG46sIY3E25pFt2sTkJwenUBPNKtFLA/exec?GET=example&kanji=${t}`,s=await fetch(e);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}const ve=[{id:1,title:"日本語が面白いですね。",subTitle:"nihongo ga omoshiroi desu ne.",vietnamese:"Tiếng Nhật thú vị nhỉ ."}],ts="SoRor0ieo3IWkzd4WK3P",ee="KANJI_ITEM_",be="KANJI_INDEX_LIST",ss=10,te=2e3,ns=t=>{const{generateContent:e}=He(),{encryptTRUVN:s,decryptTRUVN:n}=Ce(ts),[r,a]=f.useState(1),[c,o]=f.useState(!1),[l,d]=f.useState(!0),[u,h]=f.useState([]),g=f.useRef(null),m=f.useMemo(()=>`${ee}${t}`,[t]),x=()=>{const b=localStorage.getItem("LAST_GEMINI_CALL"),j=Date.now();if(b&&j-parseInt(b)<te){const y=Math.ceil((te-(j-parseInt(b)))/1e3);return console.warn(`⏳ Đang chờ Rate Limit: Vui lòng đợi ${y}s...`),!1}return localStorage.setItem("LAST_GEMINI_CALL",j.toString()),!0},v=f.useCallback((b,j)=>{try{const y=s(JSON.stringify(j));localStorage.setItem(`${ee}${b}`,y);const w=localStorage.getItem(be);let S=w?JSON.parse(w):[];if(S=S.filter(E=>E!==b),S.push(b),S.length>ss){const E=S.shift();localStorage.removeItem(`${ee}${E}`)}localStorage.setItem(be,JSON.stringify(S))}catch(y){console.warn("Cache error:",y)}},[s]);f.useEffect(()=>{if(!t)return;d(!0);const b=async()=>{const j=localStorage.getItem(m);if(j)try{const y=JSON.parse(n(j));h(y),y.length>0&&a(y[0].id),d(!1),g.current=null;return}catch{console.error("Cache lỗi, sẽ tải từ server...")}if(g.current!==t){if(!x()){setTimeout(()=>{g.current===t&&b()},4e3),g.current=t;return}g.current=t;try{const y=await es(t);if((y==null?void 0:y.success)===200){const w=JSON.parse(n(y.data));h(w),(w==null?void 0:w.length)>0&&a(w[0].id),v(t,w)}else h(w=>w.length>0?w:ve)}catch(y){console.error("Lỗi tải ban đầu:",y),h(w=>w.length>0?w:ve)}finally{d(!1)}}};return b(),()=>{}},[t,n,m,v]);const A=f.useCallback(async()=>{if(c)return;const b=localStorage.getItem("LAST_GEMINI_CALL"),j=Date.now();if(b&&j-parseInt(b)<te){alert("Vui lòng đợi vài giây trước khi tải tiếp...");return}if(confirm("Tải thêm ví dụ?")&&x()){o(!0);try{const y=await Qt(t,e);typeof y=="string"?y.includes("429")||y.includes("Quota")?alert("Hệ thống đang quá tải (Quota Exceeded). Vui lòng đợi 2-3 phút."):alert(y):y&&typeof y=="object"&&!y.error&&h(w=>{const S=[{...y,id:Date.now()},...w];return a(S[0].id),v(t,S),S})}catch(y){console.error("AI Gen Error:",y),alert("Lỗi kết nối AI. Vui lòng thử lại sau.")}finally{o(!1)}}},[c,t,e,v]);return{exampleData:u,activeId:r,setActiveId:a,isLoading:c,isFetchingInitial:l,handleLoadMore:A}};function rs({kanji:t}){const{exampleData:e,activeId:s,setActiveId:n,isLoading:r,isFetchingInitial:a,handleLoadMore:c}=ns(t);return i.jsxs("section",{className:"w-full h-full overflow-hidden bg-indigo-50 rounded-xl p-2 flex flex-col gap-2",children:[i.jsx(zt,{isLoading:r,onLoadMore:c}),i.jsxs("div",{className:"h-full overflow-x-hidden overflow-y-scroll pt-2 flex flex-col relative",style:{clipPath:"inset(0 0 0 0)"},children:[e==null?void 0:e.map(o=>i.jsx(Zt,{data:o,activeId:s,onSelect:n},o.id)),a&&i.jsxs("div",{className:"w-full py-8 flex flex-col justify-center items-center transition-opacity duration-500 animate-pulse",children:[i.jsx(Ee,{}),i.jsx("b",{className:"text-indigo-600 mt-2",children:"Đang tải dữ liệu..."})]}),!a&&(e==null?void 0:e.length)===0&&i.jsx("div",{className:"flex flex-col justify-center items-center py-8 gap-4",children:i.jsx("p",{className:"text-indigo-800 italic",children:"Chưa có ví dụ nào."})}),i.jsx("div",{className:"h-4 flex-shrink-0"})]})]})}const is=f.memo(rs);function as(t){return D({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"},child:[]},{tag:"path",attr:{d:"M11 14h1v4h1"},child:[]},{tag:"path",attr:{d:"M12 11h.01"},child:[]}]})(t)}function os(t){return D({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M232,32a8,8,0,0,0-8-8c-44.08,0-89.31,49.71-114.43,82.63A60,60,0,0,0,32,164c0,30.88-19.54,44.73-20.47,45.37A8,8,0,0,0,16,224H92a60,60,0,0,0,57.37-77.57C182.3,121.31,232,76.08,232,32ZM124.42,113.55q5.14-6.66,10.09-12.55A76.23,76.23,0,0,1,155,121.49q-5.9,4.94-12.55,10.09A60.54,60.54,0,0,0,124.42,113.55Zm42.7-2.68a92.57,92.57,0,0,0-22-22c31.78-34.53,55.75-45,69.9-47.91C212.17,55.12,201.65,79.09,167.12,110.87Z"},child:[]}]})(t)}function cs({componentActive:t,setComponentActive:e}){const s=[{id:1,label:"Thông tin Kanji",icon:i.jsx(as,{})},{id:2,label:"Cách viết Kanji",icon:i.jsx(os,{})}];return i.jsx("div",{className:"w-full",children:i.jsx("div",{className:"pt-2 px-2",children:i.jsx("ul",{className:"flex items-end justify-center gap-1",children:s.map(n=>{const r=t===n.id;return i.jsx(Ne,{title:n.label,children:i.jsx("li",{onClick:()=>e(n.id),className:`
                  relative flex items-center gap-2 px-6 cursor-pointer transition-all 
                  font-medium text-sm rounded-t-2xl 
                  ${r?"bg-gray-700 text-white py-2":"bg-gray-200 text-indigo-800 py-2 hover:bg-gray-300 hover:text-indigo-800"}
                    }
                `,children:i.jsx("div",{className:" flex items-center gap-2 ",children:n.icon})})},n.id)})})})})}const ls=f.memo(cs);function $({dataKanji:t,...e}){const s=n=>String(n).replace(/],/g,"]<br />").replace(/\[(.*?)\]/g,'<span class="text-sm font-light text-teal-800">  [Nhóm $1 ]</span>').replace(/\((.*?)\)/g,'<span class="text-sm font-light text-teal-800">[$1]</span>');return i.jsx("section",{className:"w-full gap-2",children:i.jsxs("div",{className:"grid text-start grid-cols-[100px_1fr]  items-center gap-5 h-fit w-full",children:[i.jsx("span",{className:" bg-indigo-200 w-fit text-indigo-900 text-center py-1 px-3 shadow shadow-indigo-800/50 font-bold text-sm rounded-full",children:(e==null?void 0:e.title)||"Loading..."}),i.jsx("span",{className:`${(e==null?void 0:e.className)||""}  w-full text-sm md:text-base xl:text-md`,dangerouslySetInnerHTML:{__html:s(t)}})]})})}function us({dataKanji:t}){const{kanji:e,hanviet:s,level:n,kunyomi:r,onyomi:a,keywords:c,nghia:o}=t;return i.jsxs(N.Fragment,{children:[i.jsx($,{title:"Hán tự",dataKanji:e,className:"font-black font-Japan text-slate-900 kanji-font leading-none"}),i.jsx($,{title:"Hán Việt",dataKanji:s}),i.jsx($,{title:"Kunyomi",dataKanji:r,className:"font-bold text-sky-600"}),i.jsx($,{title:"Onyomi",dataKanji:a,className:"font-bold text-red-500"}),i.jsx($,{title:"Nghĩa",dataKanji:o}),i.jsx($,{title:"JLPT",dataKanji:n})]})}const hs=t=>{if(!t||typeof t!="string"||t.length===0)return null;const e=t.codePointAt(0);if(e){const s=e.toString(16).toLowerCase();return{unicodeHex:`${s.toUpperCase()}`,kanjiVGFileName:`0${s}.svg`}}return null},ds=async t=>{const e="https://kanjivg.tagaini.net/kanjivg/kanji/";try{const s=await fetch(`${e}${t}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.text()}catch(s){return console.error("Error fetching kanji data:",s),null}},fs=f.memo(({path:t,isActive:e,isCompleted:s,color:n,speed:r,onFinished:a})=>{const c=f.useRef(null),[o,l]=f.useState(0),[d,u]=f.useState(0);return f.useEffect(()=>{if(c.current){const h=c.current.getTotalLength();l(h),u(h)}},[t.d]),f.useEffect(()=>{if(s)u(0);else if(e&&o>0){let h=null;const g=o*15/r,m=x=>{h||(h=x);const v=x-h,A=Math.min(v/g,1);u(o*(1-A)),A<1?window.requestAnimationFrame(m):setTimeout(()=>a(),50)};window.requestAnimationFrame(m)}else u(o)},[e,s,o,r,a]),i.jsx("path",{ref:c,d:t.d,stroke:e||s?n:"#e2e8f0",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",strokeDasharray:o,strokeDashoffset:d,style:{transition:e?"none":"stroke 0.4s ease, opacity 0.3s ease",opacity:e||s?1:.2}})}),gs=({kanjiData:t,status:e,currentStrokeIndex:s,speed:n,showNumbers:r,onStrokeFinished:a})=>i.jsxs("div",{className:"relative w-full max-w-[240px] md:max-w-[340px] aspect-square bg-white rounded-[2.5rem] shadow-2xl shadow-slate-200 border-8 border-slate-100 p-10 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 p-4 pointer-events-none opacity-[0.05]",children:i.jsxs("div",{className:"w-full h-full border-2 border-slate-900 border-dashed relative rounded-2xl",children:[i.jsx("div",{className:"absolute top-1/2 left-0 w-full border-t-2 border-slate-900 border-dashed"}),i.jsx("div",{className:"absolute left-1/2 top-0 h-full border-l-2 border-slate-900 border-dashed"})]})}),i.jsxs("svg",{viewBox:"0 0 109 109",className:"w-full h-full drop-shadow-xl overflow-visible",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("g",{children:t.paths.map((c,o)=>i.jsx(fs,{path:c,color:z[o%z.length],isActive:e==="PLAYING"&&s===o,isCompleted:e==="COMPLETED"||s>o||e==="PAUSED"&&s===o,speed:n,onFinished:a},c.id))}),r&&i.jsx("g",{className:"select-none pointer-events-none",children:t.numbers.map((c,o)=>(e==="COMPLETED"||s>=o)&&i.jsx("text",{transform:c.transform,fontSize:"5",fontWeight:"900",fill:s===o?z[o%z.length]:"#333",style:{opacity:s===o?1:.4},children:c.text},`n-${o}`))})]})]});function ms(t){return D({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M133 440a35.37 35.37 0 0 1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0 1 35.77.45l247.85 148.36a36 36 0 0 1 0 61l-247.89 148.4A35.5 35.5 0 0 1 133 440z"},child:[]}]})(t)}function ps(t){return D({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 12c0 5.52-4.48 10-10 10S2 17.52 2 12c0-1.19.22-2.32.6-3.38l1.88.68C4.17 10.14 4 11.05 4 12c0 4.41 3.59 8 8 8s8-3.59 8-8-3.59-8-8-8c-.95 0-1.85.17-2.69.48l-.68-1.89C9.69 2.22 10.82 2 12 2c5.52 0 10 4.48 10 10zM5.5 4C4.67 4 4 4.67 4 5.5S4.67 7 5.5 7 7 6.33 7 5.5 6.33 4 5.5 4zM11 16V8H9v8h2zm4 0V8h-2v8h2z"},child:[]}]})(t)}function xs(t){return D({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.003 7.754a.75.75 0 0 1 .75-.75h5.232a.75.75 0 0 1 .53 1.28l-2.776 2.777c.55.097 1.057.253 1.492.483.905.477 1.504 1.284 1.504 2.418 0 .966-.471 1.75-1.172 2.27-.687.511-1.587.77-2.521.77-1.367 0-2.274-.528-2.667-.756a.75.75 0 0 1 .755-1.297c.331.193.953.553 1.912.553.673 0 1.243-.188 1.627-.473.37-.275.566-.635.566-1.067 0-.5-.219-.836-.703-1.091-.538-.284-1.375-.443-2.471-.443a.75.75 0 0 1-.53-1.28l2.643-2.644h-3.421a.75.75 0 0 1-.75-.75ZM7.88 15.215a1.4 1.4 0 0 0-1.446.83.75.75 0 0 1-1.37-.61 2.899 2.899 0 0 1 2.986-1.71c.589.06 1.139.323 1.557.743.434.446.685 1.058.685 1.778 0 1.641-1.254 2.437-2.12 2.986-.538.341-1.18.694-1.495 1.273H9.75a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75c0-1.799 1.337-2.63 2.243-3.21 1.032-.659 1.55-1.031 1.55-1.8 0-.355-.116-.584-.26-.732a1.071 1.071 0 0 0-.652-.298Zm.234-13.121a.75.75 0 0 1 .386.656V9h1.252a.75.75 0 0 1 0 1.5H5.75a.75.75 0 0 1 0-1.5H7V4.103l-.853.533a.749.749 0 1 1-.795-1.272l2-1.25a.749.749 0 0 1 .762-.02Z"},child:[]}]})(t)}const ys=({status:t,togglePlay:e,showNumbers:s,setShowNumbers:n,speed:r,setSpeed:a,kanjiData:c,currentStrokeIndex:o,jumpTo:l})=>{const d=f.useRef([]);return f.useEffect(()=>{d.current[o]&&d.current[o].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},[o]),i.jsxs("div",{className:"w-full max-w-[420px] mt-5 space-y-8",children:[i.jsxs("div",{className:" flex justify-center items-center gap-6",children:[i.jsx("button",{onClick:e,className:"w-14 aspect-square rounded-full bg-slate-900 text-white shadow-2xl flex items-center justify-center text-3xl hover:bg-slate-800 transition-all active:scale-90",children:t!="PLAYING"?i.jsx(ms,{}):i.jsx(ps,{})}),i.jsx("button",{onClick:()=>n(!s),className:`w-14 aspect-square rounded-full border transition-all flex items-center justify-center shadow-sm active:scale-90 ${s?"bg-blue-50 border-blue-200 text-blue-500":"bg-white border-slate-200 text-slate-400"}`,children:i.jsx(xs,{})})]}),i.jsxs("div",{className:" relative bg-white p-4 rounded-3xl border border-slate-100 shadow-sm",children:[i.jsxs("div",{className:"absolute top-0 left-0 px-5 -translate-y-1/2 w-full flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-[10px] font-black text-slate-700 bg-slate-100 px-3 py-1 rounded-lg uppercase tracking-widest",children:"Tốc độ"}),i.jsxs("span",{className:"text-xs font-bold text-slate-700 bg-slate-100 px-3 py-1 rounded-lg",children:[r.toFixed(1),"x"]})]}),i.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.1",value:r,onChange:u=>a(parseFloat(u.target.value)),className:"w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer accent-slate-900"})]}),i.jsx("div",{id:"steps-timeline",className:"flex gap-2 overflow-x-auto p-2 scrollbar-hide ",children:c.paths.map((u,h)=>i.jsx("button",{ref:g=>d.current[h]=g,onClick:()=>l(h),className:`flex-shrink-0 w-11 h-11 rounded-2xl font-black text-xs transition-all border ${o===h?"bg-slate-900 text-white border-slate-900 scale-110 shadow-lg":o>h?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-white text-slate-400 border-slate-200"}`,children:h+1},`btn-${h}`))})]})};function vs({dataKanji:t}){const{kanji:e,hanviet:s}=t;return f.useEffect(()=>{},[e]),i.jsx("div",{className:"shadow shadow-gray-400 w-full h-full p-2 rounded-xl",children:i.jsx("b",{className:"text-sm font-bold",children:"Note : Chức năng AI mục này đang trong quá trình phát triển và thử nghiệm."})})}const bs=({kanji:t,dataKanji:e})=>{const[s,n]=f.useState(()=>ye(qt)),[r,a]=f.useState(-1),[c,o]=f.useState("IDLE"),[l,d]=f.useState(4),[u,h]=f.useState(!0),[g,m]=f.useState(!1),[x,v]=f.useState(""),A=f.useRef(!1),b=f.useRef(!1);f.useEffect(()=>{(async()=>{try{const C=hs(t);if(C!=null&&C.kanjiVGFileName){const k=await ds(C.kanjiVGFileName);j(k)}}catch(C){console.error("Lỗi khi lấy dữ liệu Kanji:",C)}})()},[t]);const j=E=>{try{const C=ye(E);n(C),a(-1),o("IDLE"),b.current=!1,m(!1),v("")}catch(C){alert(C.message)}};f.useEffect(()=>{if(!b.current){const E=setTimeout(()=>{a(0),o("PLAYING"),b.current=!0},800);return()=>clearTimeout(E)}},[s]);const y=f.useCallback(()=>{if(A.current){o("PAUSED"),A.current=!1;return}r<s.paths.length-1?a(E=>E+1):o("COMPLETED")},[r,s.paths.length]),w=()=>{A.current=!1,c==="PLAYING"?o("PAUSED"):((c==="IDLE"||c==="COMPLETED")&&a(0),o("PLAYING"))},S=E=>{A.current=!0,a(E),o("PLAYING")};return i.jsxs("section",{className:"grid grid-cols-1 xl:grid-cols-[1fr_1fr] w-full h-full shadow shadow-gray-400 p-2 rounded-2xl",children:[i.jsxs("div",{className:"w-full flex flex-col justify-start items-center ",children:[i.jsx(gs,{kanjiData:s,status:c,currentStrokeIndex:r,speed:l,showNumbers:u,onStrokeFinished:y}),i.jsx(ys,{status:c,togglePlay:w,showNumbers:u,setShowNumbers:h,speed:l,setSpeed:d,kanjiData:s,currentStrokeIndex:r,jumpTo:S})]}),i.jsx("div",{className:"",children:i.jsx(vs,{dataKanji:e})})]})};function ws({dataKanji:t,kanji:e}){return i.jsx(bs,{kanji:e,dataKanji:t})}function As(t){confirm("Bạn có muốn đóng tab thông tin Kanji không？")&&t(!1)}function js({dataKanji:t,setOpenTabKanji:e}){const[s,n]=N.useState(1),[r,a]=f.useState(!1);return f.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),i.jsx(i.Fragment,{children:i.jsx("div",{onClick:()=>As(e),className:"fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gray-800/50 w-screen h-screen backdrop-blur-sm transition-all",children:i.jsxs("div",{onClick:c=>c.stopPropagation(),className:`select-text absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\r
                            h-[85vh] w-[95vw] lg:w-[80vw] xl:w-[70vw] rounded-3xl\r
                            bg-white flex flex-col gap-5 p-5\r
                            shadow-2xl shadow-indigo-500/50 overflow-hidden\r
                            animate-in fade-in zoom-in duration-300\r
                            `,children:[i.jsxs("section",{className:`w-full flex flex-col transition-all duration-500 ease-in-out ${s===1?"h-fit mb-2":"h-full"}`,children:[i.jsx(ls,{componentActive:s,setComponentActive:n}),i.jsxs("div",{className:`
                            ${Number(s)===1?"opacity-100 scale-100":"opacity-0 scale-95 hidden"} 
                            w-full flex flex-col gap-2 shadow-sm border border-gray-100 p-3 rounded-2xl relative
                            transition-all duration-700 cubic-bezier(0.4, 0, 0.2, 1)
                            ${r?"max-h-[1000px]":"max-h-[140px]"} 
                            md:max-h-full md:overflow-visible overflow-hidden
                        `,children:[i.jsx(us,{dataKanji:t}),!r&&i.jsx("div",{className:"md:hidden absolute bottom-0 left-0 w-full h-16 bg-gradient-to-t from-white via-white/80 to-transparent pointer-events-none z-10"})]}),Number(s)===1&&i.jsx("button",{onClick:()=>a(!r),className:"md:hidden flex items-center justify-center gap-2 text-indigo-600 text-xs font-bold py-2 mt-1 active:scale-95 transition-transform",children:i.jsxs("span",{className:"bg-indigo-50 px-4 py-1.5 rounded-full flex items-center gap-2 shadow-sm border border-indigo-100",children:[r?"Thu gọn":"Xem chi tiết Kanji",i.jsx(Vt,{className:`transition-transform duration-500 ${r?"rotate-180":"rotate-0"}`})]})}),i.jsx("div",{className:Number(s)===2?"block h-full animate-in slide-in-from-right-5 duration-300":"hidden",children:i.jsx(ws,{dataKanji:t,kanji:t==null?void 0:t.kanji})})]}),Number(s)===1&&i.jsx("div",{className:"flex-1 overflow-hidden animate-in fade-in slide-in-from-bottom-5 duration-700 delay-200",children:i.jsx(is,{kanji:t==null?void 0:t.kanji})})]})})})}const Cs=t=>t?{backgroundColor:"#fcd34d"}:{},Ns=(t,e)=>`text-2xl font-[600] text-indigo-900 ${!t&&!e?"blur-[5px]":""}`,Es=(t,e)=>`${!t&&!e?"blur-[5px]":""}`;function Ss({dataKanji:t,...e}){const{kanji:s,hanviet:n,level:r}=t,{hdl_card:a}=N.useContext(B).contextValue,{hanviet:c,kanji:o}=a,[l,d]=f.useState(!1),[u,h]=f.useState(!1),g=f.useRef(null),m=f.useCallback(()=>{d(b=>!b)},[]),x=f.useCallback(b=>{g.current&&!g.current.contains(b.target)&&d(!1)},[g]);f.useEffect(()=>(document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}),[x]);const v=f.useMemo(()=>Ns(o,l),[o,l]),A=f.useMemo(()=>Es(c,l),[c,l]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{ref:g,onClick:m,className:`${(e==null?void 0:e.trinhDo)==0||(e==null?void 0:e.trinhDo)==r?"block":"hidden"} relative cursor-pointer w-full aspect-square bg-gray-100 rounded-lg shadow-md p-4 flex flex-col items-center justify-center transition-all`,style:Cs(l),children:[i.jsx("h1",{style:{fontFamily:e==null?void 0:e.fontFamily,fontSize:e==null?void 0:e.size},className:v,children:s}),i.jsx("p",{className:A,children:n}),l&&i.jsx("button",{onClick:()=>h(!0),className:"z-30 absolute bottom-0 translate-y-full right-1/2 translate-x-1/2 text-nowrap text-sm bg-indigo-600 text-white font-bold py-1 px-2 rounded-b",children:"Chi tiết"})]}),u&&i.jsx(js,{dataKanji:t,setOpenTabKanji:h})]})}const Ms=f.memo(Ss),we=200,Is=t=>`
    overflow-hidden flex flex-wrap bg-white/50 gap-2 border-gray-300 rounded-2xl transition-all
    ${t?"h-0 p-0 border-none":"h-fit p-2 border-b"}
  `.trim(),ks=(t,e)=>`
    absolute cursor-pointer bottom-0 left-1/2 -translate-x-1/2 border bg-gray-200 text-gray-700 border-gray-400 rounded-full p-2 flex items-center gap-1 hover:bg-gray-300 transition-all z-20
    ${t?"opacity-100":"opacity-0"}
    ${e?"translate-y-full rotate-180":"translate-y-1/2 rotate-0"}
  `.trim(),Ae="border bg-indigo-800 text-white border-gray-400 rounded-md px-2 py-1 flex items-center gap-1";function Ls(){const{contextValue:t}=N.useContext(B),{hdl_card:e,setHdlCard:s}=t,{hanviet:n,kanji:r}=e,[a,c]=N.useState(!1),[o,l]=N.useState(!1),d=f.useCallback(()=>{l(m=>!m)},[]),u=f.useCallback(m=>{s(x=>({...x,[m]:!x[m]}))},[s]);f.useEffect(()=>{const m=()=>{window.scrollY>=we?c(!0):(c(!1),l(!1))};return window.addEventListener("scroll",m),window.scrollTo({top:we,behavior:"smooth"}),()=>{window.removeEventListener("scroll",m)}},[]);const h=f.useMemo(()=>Is(o),[o]),g=f.useMemo(()=>ks(a,o),[a,o]);return i.jsxs("div",{className:"sticky top-18 z-10",children:[i.jsxs("div",{className:h,children:[i.jsxs("button",{onClick:()=>u("hanviet"),className:Ae,children:["Hán việt :",i.jsx(P,{iconName:n?"faEye":"faEyeSlash"})]}),i.jsxs("button",{onClick:()=>u("kanji"),className:Ae,children:["Kanji : ",i.jsx(P,{iconName:r?"faEye":"faEyeSlash"})]})]}),i.jsx(Ne,{title:o?"Mở":"Ẩn",onClick:d,className:g,children:i.jsx(P,{iconName:"faCircleUp"})})]})}function Ds({title:t}){return i.jsxs("div",{className:"my-10 capybaraloader absolute top-1/2 left-1/2  -translate-x-1/2 ",children:[i.jsxs("div",{className:"bg-amber-500 p-2  rounded-2xl shadow-md shadow-black/50 absolute -translate-y-full z-10",children:[i.jsx("div",{className:"absolute bottom-0 right-0 translate-y-1/2 text-amber-700 ",children:i.jsx(P,{iconName:"faCircleQuestion"})}),i.jsx("span",{className:"animate-pulse text-blue-50",children:t||"Không tìm thấy ..."})]}),i.jsxs("div",{className:"capybara",children:[i.jsxs("div",{className:"capyhead",children:[i.jsx("div",{className:"capyear",children:i.jsx("div",{className:"capyear2"})}),i.jsx("div",{className:"capyear"}),i.jsxs("div",{className:"capymouth",children:[i.jsx("div",{className:"capylips"}),i.jsx("div",{className:"capylips"})]}),i.jsx("div",{className:"capyeye"}),i.jsx("div",{className:"capyeye"})]}),i.jsx("div",{className:"capyleg"}),i.jsx("div",{className:"capyleg2"}),i.jsx("div",{className:"capyleg2"}),i.jsx("div",{className:"capy"})]}),i.jsx("div",{className:"loader",children:i.jsx("div",{className:"loaderline"})})]})}const Fs="https://script.google.com/macros/s/AKfycby1VrgeRT1YiMUDppTe2OWid77OLSeso59o8qygG46sIY3E25pFt2sTkJwenUBPNKtFLA/exec";function Bs({setStatus:t}){const{setData:e}=f.useContext(B).contextValue,{decryptTRUVN:s}=Ce("SoRor0ieo3IWkzd4WK3P"),n=je(),{loading:r,apiData:a,error:c,fetchData:o}=Ke(Fs,!0,{manual:!0}),l=()=>{const d=localStorage.getItem(window.location.pathname);if(!d)return[];let u;if(d){let h=n(d),{dataN1:g,dataN2:m,dataN3:x,dataN4:v,dataN5:A}=h;const b=JSON.parse(s(A)),j=JSON.parse(s(v)),y=JSON.parse(s(x)),w=JSON.parse(s(m)),S=JSON.parse(s(g));u=[...b,...j,...y,...w,...S]}return u};return f.useEffect(()=>{o(),e(l())},[a]),f.useEffect(()=>{r?t("Đang tải dữ liệu..."):a?t("Đã tải dữ liệu thành công ."):c&&t("Đã có lỗi khi tải dữ liệu ~.~")},[r,a,c,t]),i.jsx(i.Fragment,{})}const Ts=N.memo(Bs);function _s(){const{size:t,fontFamily:e,displayedData:s,trinhDo:n}=N.useContext(B).contextValue,[r,a]=f.useState("");return!s||s.length===0?i.jsxs("div",{className:"w-full h-full relative text-center",children:[i.jsx(Ds,{title:r}),i.jsx(Ts,{setStatus:a})]}):i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(Ls,{}),i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-7 xl:grid-cols-8 2xl:grid-cols-10 gap-5  mt-5",children:s&&(s==null?void 0:s.map((c,o)=>i.jsx(Ms,{className:"border-b border-gray-300 py-4 flex items-center space-x-4",dataKanji:c,size:t,fontFamily:e,trinhDo:n,index:o},o)))})]})}const B=N.createContext();function Gs(){const t=Ve(),[e,s]=f.useState("Noto Serif JP"),[n,r]=f.useState(0),[a,c]=f.useState(34),[o,l]=f.useState({hanviet:!0,kanji:!0}),[d,u]=f.useState(),[h,g]=f.useState(),m={fontFamily:e,setFontFamily:s,trinhDo:n,setTrinhDo:r,size:a,setSize:c,hdl_card:o,setHdlCard:l,data:d,setData:u,displayedData:h,setDisplayedData:g};return f.useEffect(()=>{window.scrollY&&window.scrollTo({top:0,behavior:"smooth"})}),i.jsxs(B.Provider,{value:{contextValue:m},children:[i.jsx("div",{children:t}),i.jsx(Pe,{}),i.jsxs("div",{className:"min-h-screen flex flex-col px-5",children:[i.jsx(Ft,{}),i.jsx(_s,{})]})]})}export{B as KanjiPageContext,Gs as default};
