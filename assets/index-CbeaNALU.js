import{r as a,c as S,b as g}from"./index-DVRot9C2.js";function b(c,s,d={}){const{manual:n=!1}=d,[y,o]=a.useState(!n),[w,i]=a.useState(null),[h,u]=a.useState(null),f=S(),l=g(),r=a.useCallback(async(m=!1)=>{o(!0),u(null);try{if(s&&!m){const e=localStorage.getItem(window.location.pathname);if(e){const D=l(e);if(D){i(D),o(!1);return}}}const t=await fetch(c);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const p=await t.json();if(i(p),s){const e=f(p);localStorage.setItem(window.location.pathname,e)}}catch(t){u(t)}finally{o(!1)}},[c,s,l,f]);return a.useEffect(()=>{n||r()},[n,r]),{loading:y,apiData:w,error:h,fetchData:r}}export{b as u};
