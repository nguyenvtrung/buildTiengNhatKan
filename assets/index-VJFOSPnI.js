import{r as o,j as e,d as T,aa as w,u as S,i as $,ab as D}from"./index-DFMJk8BF.js";import{u as C}from"./index-D3GNFJ3w.js";import{B as M,T as I,a as L,v as k}from"./ButtonToolJLPT-B8HBSP8m.js";import{B as R}from"./ButtonVoidText-BeIKjVNJ.js";import{u as z}from"./index-CDrEZtDK.js";import"./Model-CkONpvBT.js";import"./index-t--hEgTQ.js";import"./index-Cs_f-VNv.js";import"./Breadcrumbs-PNXGyQyV.js";const J=o.memo(({data:l})=>{const t=l||T;return e.jsx("h2",{className:"border border-sky-950 p-2 rounded-2xl",dangerouslySetInnerHTML:{__html:t}})}),P=o.memo(({dapAn:l,id:t,isSelected:s,isSuccess:f,onClick:d})=>{const{settings:u}=o.useContext(w),{styleFontSize:h}=u,g=`cursor-pointer px-4 py-1 w-full rounded-l-2xl  transition-all ${s?"border-gray-800 dark:border-white":"border-transparent"} ${s&&f?"  rounded-l-2xl transition-all text-white duration-200 bg-gradient-to-r from-green-900  via-green-800 via-95% to-transparent":s&&!f?" rounded-l-2xl transition-all text-white duration-200 bg-gradient-to-r from-red-900  via-red-800 via-90% to-transparent":""}`;return e.jsxs("li",{style:{fontSize:`${h}px`},className:`bg-[var(--color-main)]/5 rounded-2xl ${l===""?"hidden":"flex gap-2 items-center"}`,children:[e.jsx("input",{className:"peer/trung hidden",type:"checkbox",name:t,id:t,checked:s,readOnly:!0}),e.jsx("label",{htmlFor:t,className:g,onClick:d,children:e.jsx("div",{dangerouslySetInnerHTML:{__html:l}})})]})}),_=o.memo(({title:l,data:t,index:s,settings:f,displayMonDaiDoc:d})=>{const{settings:u}=o.useContext(w),{styleColumn:h,styleFontSize:g}=u,[i,x]=o.useState([]),m=t==null?void 0:t.dapan,{styleGDTrueFalse:r,styleColorTitle:j,styleColorShadow:n}=f,b=()=>{const a="jlpt";return r?`${a} ${y&&p?"font-bold text-green-800 border-b-2 border-green-800 transition-all duration-200":y&&!p?"font-bold text-red-800 border-b-2 border-red-800 transition-all duration-200":"text-gray-800 dark:text-white border-b-2 border-transparent font-bold transition-all duration-200"}`:`${a} font-bold `},c=o.useCallback(a=>{x(N=>{const v=[...N];return v[s]=Number(a),v})},[s]);if(!(t!=null&&t.cauhoi))return null;const p=i[s]===m,y=i[s]!==void 0&&i[s]!==null;return e.jsxs("div",{style:{"--jlpt-color-shadow-box":y&&p?"#016630":y?"#9f0712":n},className:"jlptBorderShadow p-4 rounded-md ",children:[e.jsx("h1",{className:"text-xl font-black ",children:l||""}),e.jsx("div",{className:"flex flex-col gap-5 font-Japan",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{style:{fontSize:`${g}px`},children:d&&(t==null?void 0:t.mondaidoc)&&t.mondaidoc!==""&&e.jsx(J,{data:t.mondaidoc})}),e.jsxs("div",{className:"flex flex-row gap-2 justify-between items-start",children:[e.jsxs("div",{className:"w-full flex items-center gap-4",style:{fontSize:`${g}px`},children:[e.jsx(R,{text:t==null?void 0:t.cauhoi}),e.jsx("h2",{style:{"--jlpt-title-u":j},className:b(),dangerouslySetInnerHTML:{__html:`${(t==null?void 0:t.cauhoi)||T}`}})]}),e.jsx(M,{data:t})]}),e.jsx("ul",{className:`grid ${h===1?"grid-cols-1":"grid-cols-2"}  gap-2`,children:[1,2,3,4].map(a=>e.jsx(P,{dapAn:(t==null?void 0:t[`dapan${a}`])||"",id:`dapan${a}-${s}-${(t==null?void 0:t.id)||(t==null?void 0:t.cauhoi.slice(0,10))}`,isSelected:i[s]===a,isSuccess:i[s]===a&&m===a,onClick:()=>c(String(a))},`dapan${a}-${s}`))})]})})]})}),G=o.memo(({thoiGianDaLam:l,isRunning:t,handleToggle:s})=>e.jsxs("div",{className:"sticky top-20 bg-white w-full justify-center items-center flex-col shadow shadow-gray-400 rounded-md p-4 h-fit",children:[e.jsx("h1",{className:"text-md font-bold text-center color-main",children:"Thời gian làm bài"}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx("p",{children:"Đã làm:"}),e.jsx("p",{className:"color-main",children:l})]}),e.jsx("button",{onClick:s,className:`${t?"bg-orange-200 hover:bg-orange-300":"bg-green-800 hover:bg-green-600 text-white transition-all"} mt-4 p-1 shadow rounded-full text-center w-full`,children:t?"Tạm dừng":"Tiếp tục làm bài"})]})),O=o.memo(()=>{const[l,t]=o.useState("00:00:00"),[s,f]=o.useState(!0),d=o.useRef(Date.now()),u=o.useRef(null),h=o.useRef(0);o.useEffect(()=>{let x;return s?(d.current=Date.now()-h.current,x=setInterval(()=>{const m=Date.now()-d.current;t(g(m/1e3))},1e3),u.current=x):(clearInterval(u.current),h.current=Date.now()-d.current),()=>clearInterval(u.current)},[s]);const g=x=>{const m=Math.floor(x/60),r=Math.floor(m/60),j=Math.floor(x%60),n=Math.floor(m%60);return`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`},i=()=>{f(!s)};return e.jsx(G,{thoiGianDaLam:l,isRunning:s,handleToggle:i})});function B(){return e.jsx("section",{className:"hidden xl:flex relative  min-w-[300px] ",children:e.jsx(O,{})})}function U(){const[l,t]=o.useState([]),{itemId:s}=S(),{settings:f}=o.useContext(w);$();const{n:d,m:u,y:h}=o.useMemo(()=>{const n=String(s),b=n.substring(n.indexOf("n")+1,n.indexOf("m")),c=n.substring(n.indexOf("m")+1,n.indexOf("y")),p=n.substring(n.indexOf("y")+1,n.length);return{n:b,m:c,y:p}},[s]),g=`GET=jlpt&n=${d}&m=${u}&y=${h}`,i=o.useRef(""),x=z(),{loading:m,apiData:r,fetchData:j}=C(`https://script.google.com/macros/s/AKfycbyKK_z8y0H868fSgUpGpRTMDrwnQ2f3hhAYtR0jmxjM3praui6Wqw-KRTKHycC7zwIA/exec?${g}`,!1,{manual:!0});return o.useEffect(()=>{var n;(n=r==null?void 0:r.data)!=null&&n.data&&(t(r.data.data),i.current="")},[r]),o.useEffect(()=>{j(),window.scrollY&&window.scrollTo({top:0,behavior:"smooth"})},[]),m?e.jsx(D,{}):e.jsxs("div",{className:"flex flex-col w-full min-h-screen trungSelectData",children:[e.jsx("div",{className:"px-5",children:x}),e.jsxs("div",{className:"w-full sticky top-20 z-10",children:[e.jsx(I,{}),e.jsx(L,{view:r==null?void 0:r.views})]}),e.jsxs("div",{className:"flex flex-col gap-2 dark:bg-bgColor/50 rounded-2xl px-5 py-5 z-0",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-800 dark:text-white text-center my-5",children:(r==null?void 0:r.title)||""}),e.jsxs("section",{className:"flex xl:flex-row flex-col-reverse gap-5 w-full ",children:[e.jsx("div",{className:"flex flex-col gap-5 w-full",children:l.length>0?l.map((n,b)=>{const c={...n};let p=!1;return c!=null&&c.mondaidoc&&c.mondaidoc!==""?c.mondaidoc!==i.current&&(p=!0,i.current=c.mondaidoc):c.mondaidoc=i.current,e.jsx(_,{title:n==null?void 0:n.tieudemondai,data:c,index:b,settings:f,displayMonDaiDoc:p},n.id||k())}):e.jsx("h1",{className:"text-2xl font-bold text-center",children:"Không có dữ liệu"})}),e.jsx(B,{})]}),e.jsx("p",{className:"text-center w-full font-bold text-2xl py-5 italic",children:"Phần nghe sẽ được cập nhật sau"})]})]})}export{U as default};
